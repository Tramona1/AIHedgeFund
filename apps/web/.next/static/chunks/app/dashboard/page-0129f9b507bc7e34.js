(globalThis.webpackChunk_N_E=globalThis.webpackChunk_N_E||[]).push([[105],{22926:(e,t,s)=>{Promise.resolve().then(s.bind(s,23274))},23274:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ea});var a=s(78882),n=s(23164),r=s(14610),i=s(42072),l=s(17739),c=s(70468),o=s(10571),d=s(12325),m=s(13620),h=s(88454),u=s(23722),x=s(79025),g=s(79773),p=s(81e3),f=s(58780);let y=[{symbol:"NVDA",name:"NVIDIA Corporation"},{symbol:"AAPL",name:"Apple Inc."},{symbol:"MSFT",name:"Microsoft Corporation"},{symbol:"TSLA",name:"Tesla, Inc."},{symbol:"META",name:"Meta Platforms, Inc."},{symbol:"AMZN",name:"Amazon.com Inc."},{symbol:"GOOGL",name:"Alphabet Inc."},{symbol:"JPM",name:"JPMorgan Chase & Co."}];function j(e){let{open:t,onOpenChangeAction:s,onAddTickerAction:n}=e,[r,i]=u.useState(""),[l,c]=u.useState([]);u.useEffect(()=>{t||(i(""),c([]))},[t]);let o=e=>{l.includes(e)?c(l.filter(t=>t!==e)):c([...l,e])};return(0,a.jsx)(f.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(f.Cf,{className:"sm:max-w-md",children:[(0,a.jsx)(f.c7,{children:(0,a.jsx)(f.L3,{children:"Add Tickers to Your Watchlist"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c([...new Set([...l,...r.split(",").map(e=>e.trim().toUpperCase()).filter(Boolean)])]),i("")},className:"flex gap-2",children:[(0,a.jsx)(p.p,{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"Enter ticker symbols separated by commas...",className:"flex-1"}),(0,a.jsx)(m.$,{type:"submit",size:"sm",children:"Add"})]}),l.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Selected Tickers:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:l.map(e=>(0,a.jsxs)(g.E,{variant:"secondary",className:"px-3 py-1 flex items-center gap-1",children:[e,(0,a.jsx)("button",{onClick:()=>o(e),className:"ml-1 hover:text-destructive",children:(0,a.jsx)(x.A,{className:"h-3 w-3"})})]},e))})]}),(0,a.jsxs)("div",{className:"rounded-lg border p-4 mt-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Popular Stocks:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:y.map(e=>(0,a.jsx)(g.E,{variant:"outline",className:"cursor-pointer transition-colors ".concat(l.includes(e.symbol)?"bg-primary/10 border-primary/20":"hover:bg-primary/5"),onClick:()=>o(e.symbol),children:e.symbol},e.symbol))})]})]}),(0,a.jsxs)(f.Es,{children:[(0,a.jsx)(m.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsxs)(m.$,{onClick:()=>{l.forEach(e=>{n(e)}),s(!1)},disabled:0===l.length,children:["Add to Watchlist",l.length>0&&" (".concat(l.length,")")]})]})]})})}var v=s(73208),N=s(66120),b=s(83237),w=s(23390);let k="AIzaSyD4NUoKLR4IS7Ba5-taVGzt_KAZTYd5OE8",A="https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash:generateContent",S={sendMessage:async(e,t)=>{try{if(!k)return{text:"Gemini API key is not configured. Please add it to your environment variables.",error:"API key missing"};let s=t?"Context: ".concat(t,"\n\nQuestion: ").concat(e):e,a="".concat("You are an AI Financial Analyst assistant for the AI Hedge Fund dashboard.\nYour role is to help users understand market data, stock movements, financial indicators, and investment strategies.\n\n- Be concise but informative in your explanations\n- When discussing stocks, provide balanced perspectives on risks and opportunities\n- Use professional financial terminology but explain complex concepts simply\n- If asked about specific financial advice, remind users you're providing information, not financial advice\n- When appropriate, mention data sources or limitations\n- Focus on being helpful for investment research and analysis\n- If you don't know something, admit it rather than speculating\n\nIMPORTANT: You are limited to 800 tokens in your response. To ensure your responses are complete:\n1. Be concise and prioritize the most important information\n2. Structure longer explanations with bullet points or numbered lists\n3. Conclude your thoughts properly without cutting off mid-sentence\n4. If you're answering a complex question, focus on the key points and offer to provide more details if needed","\n\n").concat(s),n=await fetch("".concat(A,"?key=").concat(k),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:a}]}],generationConfig:{temperature:.3,topP:.9,topK:32,maxOutputTokens:800}})});if(!n.ok)throw Error("Gemini API error: ".concat(n.status," ").concat(n.statusText));let r=await n.json();if(r.candidates&&r.candidates.length>0){let e="";for(let t of r.candidates[0].content.parts)t.text&&(e+=t.text);return{text:e}}throw Error("No response from Gemini API")}catch(e){return console.error("Error sending message to AI:",e),{text:"I'm sorry, I couldn't process your request at this time. Please try again later.",error:e instanceof Error?e.message:"Unknown error"}}},generateInsights:async(e,t)=>{try{if(!k)return{text:"Gemini API key is not configured. Please add it to your environment variables.",error:"API key missing"};let s="\n      I need insights about ".concat(e,". \n      \n      Here is the relevant data:\n      ").concat(JSON.stringify(t,null,2),"\n      \n      Please provide:\n      1. A concise analysis of this data\n      2. Key takeaways for investors\n      3. Potential market implications\n      4. Any notable patterns or anomalies\n      \n      IMPORTANT: You are limited to 800 tokens in your response. Be concise, prioritize key insights, and ensure your response is complete without cutting off mid-thought.\n      "),a=await fetch("".concat(A,"?key=").concat(k),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:s}]}],generationConfig:{temperature:.3,topP:.9,topK:32,maxOutputTokens:800}})});if(!a.ok)throw Error("Gemini API error: ".concat(a.status," ").concat(a.statusText));let n=await a.json();if(n.candidates&&n.candidates.length>0){let e="";for(let t of n.candidates[0].content.parts)t.text&&(e+=t.text);return{text:e}}throw Error("No response from Gemini API")}catch(e){return console.error("Error generating insights:",e),{text:"I'm sorry, I couldn't generate insights at this time. Please try again later.",error:e instanceof Error?e.message:"Unknown error"}}}},I={sendMessage:async(e,t)=>{try{try{return await (0,w.ff)("/api/ai/chat",{method:"POST",body:JSON.stringify({message:e,context:t})})}catch(s){return console.warn("Backend AI API unavailable, falling back to direct Gemini API:",s),await S.sendMessage(e,t)}}catch(e){return console.error("Error sending message to AI:",e),{text:"I'm sorry, I couldn't process your request at this time. Please try again later.",error:e instanceof Error?e.message:"Unknown error"}}},generateInsights:async(e,t)=>{try{try{return await (0,w.ff)("/api/ai/insights",{method:"POST",body:JSON.stringify({topic:e,data:t})})}catch(s){return console.warn("Backend AI API unavailable, falling back to direct Gemini API:",s),await S.generateInsights(e,t)}}catch(e){return console.error("Error generating insights:",e),{text:"I'm sorry, I couldn't generate insights at this time. Please try again later.",error:e instanceof Error?e.message:"Unknown error"}}}};var T=s(73600),C=s(61613),E=s(67692),P=s(94119),U=s(53169),F=s(4341),O=s(48810),z=s(26314),M=s(92881);let R=[{month:"Jan",value:140},{month:"Feb",value:143},{month:"Mar",value:148},{month:"Apr",value:145},{month:"May",value:147},{month:"Jun",value:149},{month:"Jul",value:152},{month:"Aug",value:150}],G=[{month:"Jan",value:55},{month:"Feb",value:62},{month:"Mar",value:68},{month:"Apr",value:70},{month:"May",value:72},{month:"Jun",value:75},{month:"Jul",value:78},{month:"Aug",value:75}],L=[{month:"Jan",value:52},{month:"Feb",value:55},{month:"Mar",value:60},{month:"Apr",value:63},{month:"May",value:64},{month:"Jun",value:65},{month:"Jul",value:67},{month:"Aug",value:65}],$=e=>[{name:"value",value:e},{name:"empty",value:100-e}],J=e=>{let{cx:t,cy:s,value:n}=e;return(0,a.jsx)("text",{x:t,y:s,fill:"#888",textAnchor:"middle",dominantBaseline:"central",children:"".concat(n,"%")})};function _(){let{openAiChatAction:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,s]=(0,u.useState)("gauge"),[n,r]=(0,u.useState)(!1),[i,l]=(0,u.useState)(null),[o,x]=(0,u.useState)(!1),g=(0,u.useCallback)(async()=>{if(i){r(e=>!e);return}x(!0),r(!0);try{let e=await I.generateInsights("S&P 500 RSI Technical Analysis",{currentRSI:65,historicalData:L,overboughtThreshold:70,oversoldThreshold:30});l(e.text)}catch(e){console.error("Error generating RSI insights:",e),l("Unable to generate insights at this time. Please try again later.")}finally{x(!1)}},[i]);return(0,a.jsx)("div",{className:"border-b bg-card",children:(0,a.jsx)(d.m,{children:(0,a.jsxs)("div",{className:"py-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Market Indicators"}),(0,a.jsx)(v.tU,{value:t,onValueChange:e=>s(e),children:(0,a.jsxs)(v.j7,{className:"grid w-[200px] grid-cols-2",children:[(0,a.jsx)(v.Xi,{value:"gauge",children:"Gauge View"}),(0,a.jsx)(v.Xi,{value:"history",children:"History"})]})})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,a.jsxs)(h.Zp,{className:"p-4 overflow-hidden",children:[(0,a.jsxs)("div",{className:"mb-2 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:"Buffett Indicator"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Market Valuation Metric"})]}),e&&(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>e("Explain the Buffett Indicator, which is currently at 150%. What does this high reading mean for the overall market valuation and potential risks?"),children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})]}),"gauge"===t?(0,a.jsx)("div",{className:"h-[180px]",children:(0,a.jsx)(T.u,{width:"100%",height:"100%",children:(0,a.jsxs)(C.r,{children:[(0,a.jsxs)(E.F,{data:$(150),cx:"50%",cy:"50%",startAngle:180,endAngle:0,innerRadius:60,outerRadius:80,paddingAngle:0,dataKey:"value",label:J,children:[(0,a.jsx)(P.f,{fill:"#ef4444"}),(0,a.jsx)(P.f,{fill:"#e5e7eb"})]}),(0,a.jsx)("text",{x:"50%",y:"120",textAnchor:"middle",className:"text-xs",children:"Significantly Overvalued"})]})})}):(0,a.jsx)("div",{className:"h-[180px]",children:(0,a.jsx)(T.u,{width:"100%",height:"100%",children:(0,a.jsxs)(U.Q,{data:R,margin:{top:10,right:10,left:0,bottom:20},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"buffettColor",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:.2})]})}),(0,a.jsx)(F.W,{dataKey:"month",tick:{fontSize:10}}),(0,a.jsx)(O.h,{domain:[120,160],tick:{fontSize:10}}),(0,a.jsx)(z.m,{}),(0,a.jsx)(M.G,{type:"monotone",dataKey:"value",stroke:"#ef4444",fillOpacity:1,fill:"url(#buffettColor)"})]})})})]}),(0,a.jsxs)(h.Zp,{className:"p-4 overflow-hidden",children:[(0,a.jsxs)("div",{className:"mb-2 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:"Fear & Greed Index"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Market Sentiment Indicator"})]}),e&&(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>e("The Fear & Greed Index is currently showing 'Extreme Greed' at 75. What does this tell us about market sentiment and how might this affect market performance in the near term?"),children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})]}),"gauge"===t?(0,a.jsx)("div",{className:"h-[180px]",children:(0,a.jsx)(T.u,{width:"100%",height:"100%",children:(0,a.jsxs)(C.r,{children:[(0,a.jsxs)(E.F,{data:$(75),cx:"50%",cy:"50%",startAngle:180,endAngle:0,innerRadius:60,outerRadius:80,paddingAngle:0,dataKey:"value",label:J,children:[(0,a.jsx)(P.f,{fill:"#22c55e"}),(0,a.jsx)(P.f,{fill:"#e5e7eb"})]}),(0,a.jsx)("text",{x:"50%",y:"120",textAnchor:"middle",className:"text-xs",children:"Extreme Greed"})]})})}):(0,a.jsx)("div",{className:"h-[180px]",children:(0,a.jsx)(T.u,{width:"100%",height:"100%",children:(0,a.jsxs)(U.Q,{data:G,margin:{top:10,right:10,left:0,bottom:20},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"fearGreedColor",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#22c55e",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#22c55e",stopOpacity:.2})]})}),(0,a.jsx)(F.W,{dataKey:"month",tick:{fontSize:10}}),(0,a.jsx)(O.h,{domain:[0,100],tick:{fontSize:10}}),(0,a.jsx)(z.m,{}),(0,a.jsx)(M.G,{type:"monotone",dataKey:"value",stroke:"#22c55e",fillOpacity:1,fill:"url(#fearGreedColor)"})]})})})]}),(0,a.jsxs)(h.Zp,{className:"p-4 overflow-hidden",children:[(0,a.jsxs)("div",{className:"mb-2 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:"S&P 500 RSI"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Relative Strength Index"})]}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsxs)(m.$,{variant:"ghost",size:"sm",className:"h-8",onClick:g,children:[(0,a.jsx)("span",{className:"mr-1",children:"AI Insights"}),n?(0,a.jsx)(N.A,{className:"h-4 w-4"}):(0,a.jsx)(b.A,{className:"h-4 w-4"})]}),e&&(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>e("The S&P 500 RSI is currently at 65, indicating it's slightly overbought. Can you explain what RSI measures, what this level means, and how traders typically use this information?"),children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})]})]}),"gauge"===t?(0,a.jsx)("div",{className:"h-[180px]",children:(0,a.jsx)(T.u,{width:"100%",height:"100%",children:(0,a.jsxs)(C.r,{children:[(0,a.jsxs)(E.F,{data:$(65),cx:"50%",cy:"50%",startAngle:180,endAngle:0,innerRadius:60,outerRadius:80,paddingAngle:0,dataKey:"value",label:J,children:[(0,a.jsx)(P.f,{fill:"#f59e0b"}),(0,a.jsx)(P.f,{fill:"#e5e7eb"})]}),(0,a.jsx)("text",{x:"50%",y:"120",textAnchor:"middle",className:"text-xs",children:"Slightly Overbought"})]})})}):(0,a.jsx)("div",{className:"h-[180px]",children:(0,a.jsx)(T.u,{width:"100%",height:"100%",children:(0,a.jsxs)(U.Q,{data:L,margin:{top:10,right:10,left:0,bottom:20},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"rsiColor",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#f59e0b",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#f59e0b",stopOpacity:.2})]})}),(0,a.jsx)(F.W,{dataKey:"month",tick:{fontSize:10}}),(0,a.jsx)(O.h,{domain:[30,70],tick:{fontSize:10}}),(0,a.jsx)(z.m,{}),(0,a.jsx)(M.G,{type:"monotone",dataKey:"value",stroke:"#f59e0b",fillOpacity:1,fill:"url(#rsiColor)"})]})})}),n&&(0,a.jsxs)("div",{className:"mt-3 border-t pt-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium mb-2",children:"AI Technical Analysis"}),o?(0,a.jsx)("div",{className:"flex items-center justify-center py-3",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary animate-pulse"}),(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary animate-pulse delay-150"}),(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary animate-pulse delay-300"})]})}):(0,a.jsx)("div",{className:"text-sm whitespace-pre-line",children:i})]})]})]})]})})})}var B=s(78205),D=s(34984),W=s(11181),Z=s(14384),K=s(58530),q=s(59224),V=s(52451);function X(e){let{openAiChatAction:t}=e,[s,r]=(0,u.useState)("hedge-fund"),[i,l]=(0,u.useState)("general"),[o,d]=(0,u.useState)([]),[x,p]=(0,u.useState)({hedgeFundActivity:[],insiderTrading:[],optionsFlow:[],technicalSignals:[]}),[f,y]=(0,u.useState)(!1),[j,N]=(0,u.useState)(null),{user:b,isLoaded:w}=(0,V.Jd)();(0,u.useEffect)(()=>{let e=localStorage.getItem("userState");if(e)try{let t=JSON.parse(e);t.tickers&&Array.isArray(t.tickers)&&d(t.tickers.map(e=>e.symbol))}catch(e){console.error("Error parsing localStorage:",e)}},[]),(0,u.useEffect)(()=>{(async()=>{if(w)try{y(!0),N(null);let e=await q.VX.getAll();if(e.error){console.error("API error:",e.error,e.message),N(e.message||"Failed to load market intelligence. Please try again later.");return}let t=e.updates||[],s=t.filter(e=>"hedge_fund_buy"===e.eventType||"hedge_fund_sell"===e.eventType),a=t.filter(e=>"insider_buy"===e.eventType||"insider_sell"===e.eventType||e.eventType.includes("insider_")),n=t.filter(e=>"option_flow"===e.eventType||e.eventType.includes("option_")),r=t.filter(e=>"technical_signal"===e.eventType||e.eventType.includes("technical_"));p({hedgeFundActivity:s,insiderTrading:a,optionsFlow:n,technicalSignals:r})}catch(e){console.error("Error fetching market data:",e),N("Failed to load market intelligence. Please try again later.")}finally{y(!1)}})()},[w]);let k=e=>"general"===i?e:"user-tickers"===i&&0===o.length?[]:e.filter(e=>o.includes(e.ticker)),A=()=>"user-tickers"===i&&0===o.length?"Add tickers to your watchlist to see personalized updates":f?"Loading market intelligence...":j||"No market intelligence available at this time",S=e=>{try{let t=new Date(e),s=new Date().getTime()-t.getTime(),a=Math.floor(s/6e4),n=Math.floor(a/60),r=Math.floor(n/24);if(a<60)return a<=1?"Just now":"".concat(a," minutes ago");if(n<24)return 1===n?"1 hour ago":"".concat(n," hours ago");if(r<7)return 1===r?"Yesterday":"".concat(r," days ago");return t.toLocaleDateString()}catch(t){return e}};return(0,a.jsxs)(h.Zp,{children:[(0,a.jsx)(h.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(h.ZB,{children:"Market Intelligence"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:o.length>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.$,{variant:"general"===i?"outline":"default",size:"sm",className:"h-8 text-xs",onClick:()=>l("user-tickers"),children:"My Tickers"}),(0,a.jsx)(m.$,{variant:"general"===i?"default":"outline",size:"sm",className:"h-8 text-xs",onClick:()=>l("general"),children:"All Updates"})]})})]})}),(0,a.jsx)(h.Wu,{children:(0,a.jsxs)(v.tU,{defaultValue:"hedge-fund",value:s,onValueChange:r,className:"space-y-4",children:[(0,a.jsxs)(v.j7,{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)(v.Xi,{value:"hedge-fund",className:"gap-2",children:[(0,a.jsx)(B.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Hedge Funds"})]}),(0,a.jsxs)(v.Xi,{value:"insider",className:"gap-2",children:[(0,a.jsx)(D.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Insider"})]}),(0,a.jsxs)(v.Xi,{value:"options",className:"gap-2",children:[(0,a.jsx)(W.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Options"})]}),(0,a.jsxs)(v.Xi,{value:"technical",className:"gap-2",children:[(0,a.jsx)(Z.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Technical"})]})]}),(0,a.jsx)(v.av,{value:"hedge-fund",className:"space-y-4",children:f?(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading hedge fund activity..."})}):k(x.hedgeFundActivity).length>0?k(x.hedgeFundActivity).map(e=>(0,a.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,a.jsx)(h.Zp,{children:(0,a.jsx)(h.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.E,{variant:"secondary",children:"Hedge Fund Activity"}),(0,a.jsxs)(g.E,{variant:"outline",className:"bg-primary/10 text-primary",children:["$",e.ticker]})]}),(0,a.jsx)("h3",{className:"font-semibold",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.content}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:S(e.createdAt)})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(m.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(K.A,{className:"h-4 w-4"})}),(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:s=>{s.stopPropagation(),t("This hedge fund activity is relevant because it shows significant institutional movement that could impact the stock price of ".concat(e.ticker,". ").concat(e.content))},children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})]})]})})})},e.id)):(0,a.jsx)(Y,{message:A()})}),(0,a.jsx)(v.av,{value:"insider",className:"space-y-4",children:f?(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading insider trading data..."})}):k(x.insiderTrading).length>0?k(x.insiderTrading).map(e=>(0,a.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,a.jsx)(h.Zp,{children:(0,a.jsx)(h.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.E,{variant:"secondary",children:"Insider Trading"}),(0,a.jsxs)(g.E,{variant:"outline",className:"bg-primary/10 text-primary",children:["$",e.ticker]})]}),(0,a.jsx)("h3",{className:"font-semibold",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.content}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:S(e.createdAt)})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(m.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(K.A,{className:"h-4 w-4"})}),(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:s=>{s.stopPropagation(),t("Insider trading activity is significant for ".concat(e.ticker,". ").concat(e.content))},children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})]})]})})})},e.id)):(0,a.jsx)(Y,{message:A()})}),(0,a.jsx)(v.av,{value:"options",className:"space-y-4",children:f?(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading options flow data..."})}):k(x.optionsFlow).length>0?k(x.optionsFlow).map(e=>{var s,r;return(0,a.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,a.jsx)(h.Zp,{children:(0,a.jsx)(h.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.E,{variant:"secondary",children:"Options Flow"}),(0,a.jsxs)(g.E,{variant:"outline",className:"bg-primary/10 text-primary",children:["$",e.ticker]}),(0,a.jsx)(g.E,{children:(null===(s=e.details)||void 0===s?void 0:s.type)||"FLOW"})]}),(0,a.jsx)("h3",{className:"font-semibold",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.content}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(null===(r=e.details)||void 0===r?void 0:r.premium)&&"Premium: ".concat(e.details.premium," â€¢ "),S(e.createdAt)]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(m.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(K.A,{className:"h-4 w-4"})}),(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:s=>{s.stopPropagation(),t("This options activity for ".concat(e.ticker," is notable. ").concat(e.content))},children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})]})]})})})},e.id)}):(0,a.jsx)(Y,{message:A()})}),(0,a.jsx)(v.av,{value:"technical",className:"space-y-4",children:f?(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading technical signals..."})}):k(x.technicalSignals).length>0?k(x.technicalSignals).map(e=>{var s,r,i,l,o;return(0,a.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,a.jsx)(h.Zp,{children:(0,a.jsx)(h.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.E,{variant:"secondary",children:"Technical Signal"}),(0,a.jsxs)(g.E,{variant:"outline",className:"bg-primary/10 text-primary",children:["$",e.ticker]}),(0,a.jsx)(g.E,{className:"".concat((null===(s=e.details)||void 0===s?void 0:s.strength)==="Strong Buy"||(null===(r=e.details)||void 0===r?void 0:r.strength)==="Buy"?"bg-green-500":(null===(i=e.details)||void 0===i?void 0:i.strength)==="Strong Sell"||(null===(l=e.details)||void 0===l?void 0:l.strength)==="Sell"?"bg-red-500":"bg-yellow-500"),children:(null===(o=e.details)||void 0===o?void 0:o.strength)||"SIGNAL"})]}),(0,a.jsx)("h3",{className:"font-semibold",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.content}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:S(e.createdAt)})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(m.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(K.A,{className:"h-4 w-4"})}),(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:s=>{s.stopPropagation(),t("This technical signal for ".concat(e.ticker," is important to consider. ").concat(e.content))},children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})]})]})})})},e.id)}):(0,a.jsx)(Y,{message:A()})})]})})]})}function Y(e){let{message:t}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,a.jsx)(r.A,{className:"h-8 w-8 text-muted-foreground mb-2"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:t})]})}var H=s(86954),Q=s(6557),ee=s(59683);let et=u.forwardRef((e,t)=>{let{className:s,value:n,...r}=e;return(0,a.jsx)(Q.bL,{ref:t,className:(0,ee.cn)("relative h-2 w-full overflow-hidden rounded-full bg-muted",s),...r,children:(0,a.jsx)(Q.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});et.displayName=Q.bL.displayName;let es={};function ea(){let{user:e}=(0,V.Jd)(),[t,s]=(0,u.useState)({tickers:[]}),[x,y]=(0,u.useState)(!1),[v,N]=(0,u.useState)(!1),[b,w]=(0,u.useState)(""),[k,A]=(0,u.useState)(!0),[S,T]=(0,u.useState)(null),[C,E]=(0,u.useState)(!1),[P,U]=(0,u.useState)("is apple a good stock to buy"),[F,O]=(0,u.useState)(null),[z,M]=(0,u.useState)([]),[R,G]=(0,u.useState)(!1),[L,$]=(0,u.useState)({tickers:[],sectors:[],tradingStyle:"",updateFrequency:"weekly",customTriggers:{}}),[J,B]=(0,u.useState)([]),[D,W]=(0,u.useState)(""),[K,Y]=(0,u.useState)(!1),Q=async e=>{let t=e.toUpperCase(),s=new Date;if(es[t]&&s.getTime()-es[t].lastUpdated.getTime()<3e5)return{price:es[t].price,change:es[t].change,lastUpdated:es[t].lastUpdated};try{let e=await q.tD.getStockData(t);if(e&&e.error)console.error("API error for ".concat(t,":"),e.error,e.message);else if(e)return es[t]={price:e.price,change:e.change,lastUpdated:e.lastUpdated},{price:e.price,change:e.change,lastUpdated:e.lastUpdated}}catch(e){console.error("Error fetching stock data for ".concat(t,":"),e)}return es[t]?(console.warn("Using cached data for ".concat(t," due to API error")),{price:es[t].price,change:es[t].change,lastUpdated:es[t].lastUpdated}):(console.error("Could not fetch market data for ".concat(t,". Please try again later.")),{price:0,change:0,lastUpdated:s})};(0,u.useEffect)(()=>{(async()=>{A(!0),T(null);try{let t=localStorage.getItem("userState"),a=[];if(t)try{a=JSON.parse(t).tickers||[],s({tickers:a})}catch(e){console.error("Error parsing localStorage:",e),a=[]}if(null==e?void 0:e.id)try{let{userPreferences:t}=await q.Aj.get(e.id);if(t){$(t);let e=t.tickers||[],n=new Set([...e,...a.map(e=>e.symbol)]),r=Array.from(n),i=r.length>0?await q.tD.getBatchStockData(r):{},l=await Promise.all(r.map(async e=>{if(i[e]){let t=i[e];return es[e]={price:t.price,change:t.change,lastUpdated:t.lastUpdated},{symbol:e,price:t.price,change:t.change,volume:t.volume.toLocaleString(),lastUpdated:t.lastUpdated}}let t=a.find(t=>t.symbol===e);if(t)return t;let s=await Q(e);return{symbol:e,price:s.price,change:s.change,lastUpdated:s.lastUpdated}}));s({tickers:l}),localStorage.setItem("userState",JSON.stringify({tickers:l}))}}catch(e){console.error("Error fetching user preferences:",e),T("Failed to load preferences from server. Using cached data.")}}catch(e){console.error("Error:",e),T("An error occurred while loading your watchlist.")}finally{A(!1)}})()},[null==e?void 0:e.id]);let ee=async()=>{if(!C&&0!==t.tickers.length){E(!0);try{let e=t.tickers.map(e=>e.symbol),a=await q.tD.getBatchStockData(e),n=t.tickers.map(e=>{let t=e.symbol;if(a[t]){let s=a[t];return es[t]={price:s.price,change:s.change,lastUpdated:s.lastUpdated},{...e,price:s.price,change:s.change,volume:s.volume.toLocaleString(),lastUpdated:s.lastUpdated}}return e});s({tickers:n}),localStorage.setItem("userState",JSON.stringify({tickers:n}))}catch(e){console.error("Error refreshing ticker data:",e),console.warn("Could not refresh ticker data. Using cached values.")}finally{E(!1)}}};(0,u.useEffect)(()=>{let e,s=0,a=6e4,n=async()=>{if(C||0===t.tickers.length){e=setTimeout(n,a);return}try{E(!0),await ee(),s=0,a=6e4}catch(e){console.error("Error during periodic refresh:",e),++s>=3&&(a=Math.min(12e4*Math.pow(2,s-3),9e5),console.warn("Multiple API failures detected. Reducing refresh frequency to ".concat(a/1e3," seconds.")))}finally{E(!1),e=setTimeout(n,a)}};return e=setTimeout(n,5e3),()=>{e&&clearTimeout(e)}},[t.tickers]);let ea=async a=>{if(!a||t.tickers.some(e=>e.symbol===a.toUpperCase())){console.warn("".concat(a.toUpperCase()," is already in your watchlist."));return}let n=a.toUpperCase();console.log("Adding ticker: Fetching data for ".concat(n,"..."));try{let a=await Q(n),i={symbol:n,price:a.price,change:a.change,lastUpdated:a.lastUpdated},l=[...t.tickers,i];if(s({...t,tickers:l}),localStorage.setItem("userState",JSON.stringify({...t,tickers:l})),null==e?void 0:e.id)try{var r;let t={...L},s={userId:e.id,email:(null===(r=e.emailAddresses[0])||void 0===r?void 0:r.emailAddress)||"",tickers:[...t.tickers||[],n],sectors:t.sectors||[],tradingStyle:t.tradingStyle||"Growth",updateFrequency:t.updateFrequency||"weekly",customTriggers:t.customTriggers||{}};await q.Aj.update(s),$(s),console.log("Ticker added: ".concat(n," has been added to your watchlist."))}catch(e){console.error("Error updating user preferences:",e),console.warn("The ticker was added locally but could not be saved to your account.")}else console.log("Ticker added: ".concat(n," has been added to your watchlist."))}catch(e){console.error("Error adding ticker ".concat(n,":"),e),console.error("Could not fetch data for ".concat(n,". Please try again later."))}},en=async a=>{let n=t.tickers.filter(e=>e.symbol!==a);if(s({...t,tickers:n}),localStorage.setItem("userState",JSON.stringify({...t,tickers:n})),null==e?void 0:e.id)try{var r;let t={userId:e.id,email:(null===(r=e.emailAddresses[0])||void 0===r?void 0:r.emailAddress)||"",tickers:(L.tickers||[]).filter(e=>e!==a),sectors:L.sectors||[],tradingStyle:L.tradingStyle||"Growth",updateFrequency:L.updateFrequency||"weekly",customTriggers:L.customTriggers||{}};await q.Aj.update(t),$(t),console.log("Ticker removed: ".concat(a," has been removed from your watchlist."))}catch(e){console.error("Error updating user preferences:",e),console.warn("The ticker was removed locally but could not be updated in your account.")}else console.log("Ticker removed: ".concat(a," has been removed from your watchlist."))},er=e=>{w(e),B([{role:"assistant",content:"How can I help you with your analysis?"}]),N(!0)},ei=async()=>{if(!D.trim()&&!b)return;let e=D.trim()||b;B([...J,{role:"user",content:e}]),W(""),Y(!0);try{let t=await I.sendMessage(e,b);B(e=>[...e,{role:"assistant",content:t.text}])}catch(e){console.error("Error getting AI response:",e),B(e=>[...e,{role:"assistant",content:"I'm sorry, I encountered an error while processing your request. Please try again later."}])}finally{Y(!1),b&&w("")}};return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-2 py-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Your financial command center"})]}),!k&&S&&(0,a.jsxs)("div",{className:"mb-4 p-4 border border-red-200 bg-red-50 rounded-md text-red-800 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(r.A,{className:"h-5 w-5 mr-2"}),S]}),(0,a.jsx)(m.$,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"Refresh"})]}),(0,a.jsx)(d.m,{children:(0,a.jsxs)(h.Zp,{className:"mb-8",children:[(0,a.jsxs)(h.aR,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-5 w-5 text-blue-500"}),(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"AI Research Assistant"})]}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Ask me about any stock, market trend, or trading strategy"})]}),(0,a.jsx)(h.Wu,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(p.p,{value:P,onChange:e=>U(e.target.value),placeholder:"Ask about a stock or market trend...",className:"w-full"})}),(0,a.jsx)(m.$,{onClick:()=>{G(!0);let e=z.length>0?"Please analyze this query using the following data sources: ".concat(z.join(", "),". "):"";I.sendMessage(e+P).then(e=>{O(e.text),B([...J,{role:"user",content:P},{role:"assistant",content:e.text}])}).catch(e=>{O("Sorry, I couldn't process your request at this time. Please try again later."),console.error("AI service error:",e)}).finally(()=>{G(!1)})},disabled:R||!P.trim(),children:R?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing..."]}):(0,a.jsx)(a.Fragment,{children:"Ask AI"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Add context (select data types to search through):"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["Hedge Fund Filings","Current Positions","Insider Trading","Technical Analysis","Market Sentiment","Earnings Reports"].map(e=>(0,a.jsx)(g.E,{variant:z.includes(e)?"default":"outline",className:"cursor-pointer",onClick:()=>{M(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},children:e},e))})]}),F&&(0,a.jsx)("div",{className:"mt-2 p-4 bg-muted/50 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 text-blue-500 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-1",children:"AI Analysis"}),(0,a.jsx)("p",{className:"text-sm",children:F})]})]})})]})})]})}),(0,a.jsx)(_,{openAiChatAction:er}),(0,a.jsxs)(d.m,{className:"py-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Dashboard"}),(0,a.jsxs)(m.$,{variant:"outline",className:"flex items-center gap-1",onClick:()=>y(!0),children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),"Add Ticker"]})]}),(0,a.jsxs)(h.Zp,{className:"mb-6",children:[(0,a.jsxs)(h.aR,{className:"pb-3",children:[(0,a.jsx)(h.ZB,{children:"Your Watchlist"}),(0,a.jsx)(h.BT,{children:"Track the stocks you're interested in"})]}),(0,a.jsx)(h.Wu,{children:k?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,a.jsx)(et,{value:80,className:"w-48 mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading your watchlist..."})]}):t.tickers.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.tickers.map(e=>{var t,s;return(0,a.jsx)(h.Zp,{className:"bg-card border",children:(0,a.jsxs)(h.Wu,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"text-xl font-semibold",children:e.symbol})}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{var t;return er("Analyze the current stock price and recent performance of ".concat(e.symbol,", which is currently trading at $").concat(null===(t=e.price)||void 0===t?void 0:t.toFixed(2)," with a ").concat((e.change||0)>=0?"gain":"loss"," of ").concat(Math.abs(e.change||0).toFixed(2),"%."))},children:(0,a.jsx)(c.A,{className:"h-3 w-3"})}),(0,a.jsx)(m.$,{variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>en(e.symbol),children:"Remove"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,a.jsxs)("span",{className:"text-xl font-medium",children:["$",null===(t=e.price)||void 0===t?void 0:t.toFixed(2)]}),(0,a.jsxs)(g.E,{className:"".concat((e.change||0)>=0?"bg-green-500":"bg-red-500"),children:[(e.change||0)>=0?"+":"",null===(s=e.change)||void 0===s?void 0:s.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Last updated: ",e.lastUpdated?new Date(e.lastUpdated).toLocaleTimeString():"Unknown"]})]})},e.symbol)})}):(0,a.jsx)(H.p,{icon:Z.A,title:"No stocks in your watchlist",description:"Add stocks to your watchlist to track their performance",actionLabel:"Add Stock",onAction:()=>y(!0)})})]}),(0,a.jsx)(X,{openAiChatAction:er})]}),(0,a.jsx)(j,{open:x,onOpenChangeAction:y,onAddTickerAction:ea}),(0,a.jsx)(f.lG,{open:v,onOpenChange:N,children:(0,a.jsxs)(f.Cf,{className:"sm:max-w-[600px]",children:[(0,a.jsx)(f.c7,{children:(0,a.jsx)(f.L3,{children:"AI Market Analyst"})}),(0,a.jsxs)("div",{className:"flex flex-col h-[60vh]",children:[b&&(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mb-4 p-2 bg-muted rounded-md",children:["Context: ",b]}),(0,a.jsx)("div",{className:"border rounded-md p-4 flex-1 overflow-y-auto mb-4",children:J.length>0?(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[J.map((e,t)=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsx)("div",{className:"max-w-[80%] rounded-lg p-3 ".concat("user"===e.role?"bg-primary text-primary-foreground":"bg-muted"),children:e.content})},t)),K&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"max-w-[80%] rounded-lg p-3 bg-muted",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-muted-foreground animate-pulse"}),(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-muted-foreground animate-pulse delay-150"}),(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-muted-foreground animate-pulse delay-300"})]})})})]}):(0,a.jsx)("div",{className:"flex flex-col h-full justify-center items-center text-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Ask me anything about the market, stocks, or technical indicators."})})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:D,onChange:e=>W(e.target.value),onKeyDown:e=>"Enter"===e.key&&ei(),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border rounded-md",disabled:K}),(0,a.jsx)(m.$,{onClick:ei,disabled:K||!D.trim()&&!b,children:"Send"})]})]})]})}),(0,a.jsx)(n.P.div,{className:"fixed bottom-6 right-6 z-50",initial:{scale:0},animate:{scale:1},transition:{delay:.5},children:(0,a.jsx)(m.$,{size:"lg",className:"rounded-full h-12 w-12 p-0 shadow-lg",onClick:()=>{B([{role:"assistant",content:"How can I help you with your financial analysis today?"}]),N(!0),setTimeout(()=>{let e="Explain to me what this AI assistant can help me with";B(t=>[...t,{role:"user",content:e}]),Y(!0),I.sendMessage(e).then(e=>{B(t=>[...t,{role:"assistant",content:e.text}])}).catch(e=>{console.error("Error getting AI response:",e),B(e=>[...e,{role:"assistant",content:"I'm sorry, I encountered an error while processing your request. Please try again later."}])}).finally(()=>{Y(!1)})},500)},children:(0,a.jsx)(c.A,{className:"h-6 w-6"})})})]})}},58780:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>h,Es:()=>x,L3:()=>g,c7:()=>u,lG:()=>c,rr:()=>p,zM:()=>o});var a=s(78882),n=s(23722),r=s(9209),i=s(79025),l=s(59683);let c=r.bL,o=r.l9,d=r.ZL;r.bm;let m=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n})});m.displayName=r.hJ.displayName;let h=n.forwardRef((e,t)=>{let{className:s,children:n,...c}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(r.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...c,children:[n,(0,a.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=r.UC.displayName;let u=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};u.displayName="DialogHeader";let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};x.displayName="DialogFooter";let g=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),...n})});g.displayName=r.hE.displayName;let p=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...n})});p.displayName=r.VY.displayName},81e3:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(78882),n=s(23722),r=s(59683);let i=n.forwardRef((e,t)=>{let{className:s,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},73208:(e,t,s)=>{"use strict";s.d(t,{Xi:()=>o,av:()=>d,j7:()=>c,tU:()=>l});var a=s(78882),n=s(23722),r=s(63069),i=s(59683);let l=r.bL,c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.B8,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...n})});c.displayName=r.B8.displayName;let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.l9,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...n})});o.displayName=r.l9.displayName;let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.UC,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...n})});d.displayName=r.UC.displayName},23390:(e,t,s)=>{"use strict";s.d(t,{JR:()=>n,ff:()=>r});var a=s(37811);let n=(()=>{if(a.env.NEXT_PUBLIC_API_URL)return a.env.NEXT_PUBLIC_API_URL;{let e=window.location.hostname;return"http://".concat(e,":3002")}})();async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.startsWith("/")?e:"/".concat(e),a=t.headers||{"Content-Type":"application/json"},r=new AbortController,i=setTimeout(()=>r.abort(),3e4);try{let e="".concat(n).concat(s),l=await fetch(e,{...t,headers:a,signal:r.signal});if(clearTimeout(i),!l.ok){let e=await l.text();throw Error("API error: ".concat(l.status," ").concat(l.statusText," - ").concat(e))}return await l.json()}catch(e){if(clearTimeout(i),e instanceof Error&&"AbortError"===e.name)throw Error("Request timed out. Please try again later.");throw e}}}},e=>{var t=t=>e(e.s=t);e.O(0,[656,230,451,183,925,977,209,754,373,722,358],()=>t(22926)),_N_E=e.O()}]);